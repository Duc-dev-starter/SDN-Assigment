<%- include('partials/header') %>



    <main class="main">
        <section class="home" id="home">
            <div class="home__container container grid">


                <div class="home__data">
                    <h1 class="home__title">
                        <%= watch.watchName %>
                    </h1>
                    <h3>Brand: <%= watch.brandName.brandName %>
                    </h3>

                    <h6>
                        <% if (watch.automactic) { %>
                            Automatic
                            <% } else { %>
                                Non Automatic
                                <% } %>
                                    </h3>
                                    <p class="home__description">
                                        <%= watch.watchDescription %>
                                    </p>
                                    <span class="home__price">$<%= watch.price %></span>

                                    <div class="home__btns">
                                        <a href="#" class="button button--gray button--small">
                                            Discover
                                        </a>

                                        <button class="button home__button">ADD TO CART</button>
                                    </div>
                </div>
                <div class="home__img-bg mt-5">
                    <img src="<%= watch.image %>" alt="<%= watch.watchName %>" class="home__img ">
                </div>
            </div>
        </section>

        <section class="px-3">
            <section class="ezy__epreview2 light" id="ezy__epreview2">
                <div>
                    <div class="row justify-content-center">
                        <div class="col-12">
                            <div class="card ezy__epreview2-card mb-3">
                                <div class="card-body p-md-4">
                                    <div class="d-flex justify-content-between">
                                        <h2 class="fs-4">Customer Review</h2>
                                    </div>

                                    <% if (watch.comment.length> 0) { %>
                                        <% watch.comment.forEach(element=> { %>
                                            <hr class="ezy__epreview2-hr my-3" />
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <div class="d-flex mb-4">
                                                        <div
                                                            class="ezy__epreview2-profile rounded-circle me-2 overflow-hidden">
                                                            <img src="https://cdn.easyfrontend.com/pictures/users/user8.jpg"
                                                                alt="" class="img-fluid" />
                                                        </div>
                                                        <div>
                                                            <h5 class="fs-6 mb-1 mt-1">
                                                                <%= element.author.name %>
                                                            </h5>
                                                            <p class="ezy__epreview2-content fw-light mb-3">
                                                                <span class="ezy__epreview2-rating">
                                                                    <i class="fas fa-star"></i>
                                                                    <i class="fas fa-star"></i>
                                                                    <i class="fas fa-star"></i>
                                                                    <i class="fas fa-star"></i>
                                                                    <i class="fas fa-star"></i>
                                                                </span>
                                                                <span class="mx-1">
                                                                    <%= element.rating %>
                                                                </span>
                                                            </p>
                                                            <p class="ezy__epreview2-content opacity-50 mb-0">
                                                                Comment At
                                                            </p>
                                                            <p class="fw-bold mb-0">
                                                                <%= new Date(element.updatedAt).toLocaleString('vi-VI',
                                                                    { day: '2-digit' , month: '2-digit' ,
                                                                    year: 'numeric' , hour: '2-digit' ,
                                                                    minute: '2-digit' , second: '2-digit' }) %>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-8">
                                                    <p class="ezy__epreview2-content opacity-75 mb-4">
                                                        <%= element.content %>
                                                    </p>
                                                    <div class="d-flex justify-content-end">
                                                        <button
                                                            class="btn ezy__epreview2-btn-text py-0 d-inline-flex justify-content-center align-items-center text-decoration-none me-4">
                                                            <i class="far fa-thumbs-up fs-6 me-2"></i> Like (20)
                                                        </button>
                                                        <button
                                                            class="btn ezy__epreview2-btn-text py-0 d-inline-flex justify-content-center align-items-center text-decoration-none">
                                                            <i class="far fa-thumbs-down fs-6 me-2"></i> Dislike (6)
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr class="ezy__epreview2-hr my-3" />
                                            <% }) %>
                                                <% } else { %>
                                                    <p>There is no comment</p>
                                                    <% } %>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <% if (!hasCommented) { %>
                <% if (!isAdmin) { %>
                    <div class="comment-box">
                        <p>Leave a comment for this watch</p>
                        <form action="/api/comment?watchName=<%= encodeURIComponent(watch.watchName) %>" method="post"
                            class="comment-form">
                            <!-- Rating -->
                            <div class="stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>

                            <!-- Hidden input to store the rating value -->
                            <input type="hidden" name="rating" id="ratingInput" value="">

                            <!-- Comment textarea -->
                            <textarea name="content" id="content" cols="20" rows="4" style="margin-top: 20px;"
                                required></textarea>

                            <!-- Submit button -->
                            <button type="submit">Post comment</button>
                        </form>


                    </div>
                    <% } %>
                        <% } else { %>
                            <p>You have already commented on this watch.</p>
                            <% } %>
        </section>

    </main>

    <!--==================== FOOTER ====================-->
    <footer class="footer section">
        <div class="footer__container container grid">
            <div class="footer__content">
                <h3 class="footer__title">Our information</h3>

                <ul class="footer__list">
                    <li>1234 - Peru</li>
                    <li>La Libertad 43210</li>
                    <li>123-456-789</li>
                </ul>
            </div>
            <div class="footer__content">
                <h3 class="footer__title">About Us</h3>

                <ul class="footer__links">
                    <li>
                        <a href="#" class="footer__link">Support Center</a>
                    </li>
                    <li>
                        <a href="#" class="footer__link">Customer Support</a>
                    </li>
                    <li>
                        <a href="#" class="footer__link">About Us</a>
                    </li>
                    <li>
                        <a href="#" class="footer__link">Copy Right</a>
                    </li>
                </ul>
            </div>

            <div class="footer__content">
                <h3 class="footer__title">Product</h3>

                <ul class="footer__links">
                    <li>
                        <a href="#" class="footer__link">Road bikes</a>
                    </li>
                    <li>
                        <a href="#" class="footer__link">Mountain bikes</a>
                    </li>
                    <li>
                        <a href="#" class="footer__link">Electric</a>
                    </li>
                    <li>
                        <a href="#" class="footer__link">Accesories</a>
                    </li>
                </ul>
            </div>

            <div class="footer__content">
                <h3 class="footer__title">Social</h3>

                <ul class="footer__social">
                    <a href="https://www.facebook.com/" target="_blank" class="footer__social-link">
                        <i class='bx bxl-facebook'></i>
                    </a>

                    <a href="https://twitter.com/" target="_blank" class="footer__social-link">
                        <i class='bx bxl-twitter'></i>
                    </a>

                    <a href="https://www.instagram.com/" target="_blank" class="footer__social-link">
                        <i class='bx bxl-instagram'></i>
                    </a>
                </ul>
            </div>
        </div>

        <span class="footer__copy">&#169; Bedimcode. All rigths reserved</span>
    </footer>

    <!--=============== SCROLL UP ===============-->
    <a href="#" class="scrollup" id="scroll-up">
        <i class='bx bx-up-arrow-alt scrollup__icon'></i>
    </a>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Select all elements with the "i" tag and store them in a NodeList called "stars"
            const stars = document.querySelectorAll(".stars i");

            // Loop through the "stars" NodeList
            stars.forEach((star, index1) => {
                // Add an event listener that runs a function when the "click" event is triggered
                star.addEventListener("click", () => {
                    // Loop through the "stars" NodeList Again
                    stars.forEach((star, index2) => {
                        // Add the "active" class to the clicked star and any stars with a lower index
                        // and remove the "active" class from any stars with a higher index
                        index1 >= index2 ? star.classList.add("active") : star.classList.remove("active");
                    });
                });
            });
        })
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const stars = document.querySelectorAll('.stars i');
            const ratingInput = document.getElementById('ratingInput');

            stars.forEach((star, index) => {
                star.addEventListener('click', function () {
                    // Set the value of rating input based on the selected star
                    ratingInput.value = index + 1;

                    // Remove active class from all stars
                    stars.forEach(star => star.classList.remove('active'));

                    // Add active class to the clicked star and the ones before it
                    for (let i = 0; i <= index; i++) {
                        stars[i].classList.add('active');
                    }
                });
            });
        });
    </script>
    <!--=============== SWIPER JS ===============-->
    <script src="/js/swiper-bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
    <script src="/js/main.js"></script>


    </body>

    </html>